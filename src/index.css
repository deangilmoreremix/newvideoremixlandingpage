@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  body {
    @apply font-sans text-gray-800 antialiased bg-black;
  }
  
  /* Add display: swap to prevent invisible text during font loading */
  @font-face {
    font-family: 'Inter';
    font-display: swap;
  }
  
  /* Optimize image rendering */
  img {
    image-rendering: auto;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
  }
  
  .btn-secondary {
    @apply bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500;
  }
  
  .btn-outline {
    @apply border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500;
  }
  
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .section {
    @apply py-16 md:py-24;
  }
  
  .section-title {
    @apply text-3xl md:text-4xl font-bold text-gray-900 mb-4;
  }
  
  .section-subtitle {
    @apply text-xl text-gray-600 mb-12 max-w-3xl mx-auto;
  }
}

.gradient-bg {
  background: linear-gradient(135deg, #4338ca 0%, #ec4899 100%);
}

.card-hover {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card-hover:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.1);
}

/* Animation classes - with content-visibility for performance */
@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
  content-visibility: auto;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse-slow {
  animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes bounce-light {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.animate-bounce-light {
  animation: bounce-light 3s infinite ease-in-out;
}

/* Custom rotate for chevron */
.rotate-270 {
  transform: rotate(270deg);
}

/* Background sparkle effect */
.bg-sparkle {
  background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='1'/%3E%3Ccircle cx='13' cy='13' r='1'/%3E%3C/g%3E%3C/svg%3E");
}

/* Glass morphism */
.glass-effect {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background-color: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Add 3D card effect */
.card-3d {
  transform-style: preserve-3d;
  transform: perspective(1000px);
}

.card-3d:hover {
  box-shadow: 0 20px 30px -10px rgba(0, 0, 0, 0.2);
}

.card-3d-content {
  transform: translateZ(20px);
}

/* Enhanced text animations */
.text-glow {
  text-shadow: 0 0 5px rgba(79, 70, 229, 0.5);
}

.text-gradient {
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  background-image: linear-gradient(to right, #4f46e5, #ec4899);
}

/* Enhanced scrollbars */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Line clamp utilities */
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Image highlight effect */
.image-highlight {
  position: relative;
  overflow: hidden;
}

.image-highlight::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    to right,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: skewX(-25deg);
  will-change: transform;
}

.image-highlight:hover::after {
  animation: highlightShine 1s;
}

@keyframes highlightShine {
  100% { left: 150%; }
}

/* Growing underline animation */
.grow-underline {
  position: relative;
}

.grow-underline::after {
  content: '';
  position: absolute;
  width: 100%;
  transform: scaleX(0);
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: currentColor;
  transform-origin: bottom right;
  transition: transform 0.3s ease-out;
  will-change: transform;
}

.grow-underline:hover::after {
  transform: scaleX(1);
  transform-origin: bottom left;
}

/* Enhanced focus styles for accessibility */
:focus-visible {
  outline: 2px solid #4f46e5;
  outline-offset: 2px;
}

.focus-ring:focus-visible {
  box-shadow: 0 0 0 2px white, 0 0 0 4px #4f46e5;
  outline: none;
}

/* Film grain effect */
.film-grain {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 1;
  opacity: 0.05;
  mix-blend-mode: overlay;
}

/* Background grid pattern */
.bg-grid-pattern {
  background-image: 
    linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Sparkle burst animation */
@keyframes sparkleBurst {
  0% { transform: scale(0); opacity: 0; }
  25% { transform: scale(1); opacity: 1; }
  50% { transform: scale(0.8); opacity: 0.8; }
  100% { transform: scale(0); opacity: 0; }
}

.sparkle-burst {
  animation: sparkleBurst 1s ease-out forwards;
}

/* Star sparkle */
@keyframes starSparkle {
  0%, 100% { opacity: 1; transform: scale(1); filter: brightness(1.2); }
  50% { opacity: 0.6; transform: scale(0.85); filter: brightness(1); }
}

.star-sparkle {
  animation: starSparkle 3s ease-in-out infinite;
  will-change: transform, opacity, filter;
}

/* Shimmer effect for backgrounds */
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.bg-shimmer {
  background: linear-gradient(
    to right, 
    rgba(255, 255, 255, 0.03) 5%, 
    rgba(255, 255, 255, 0.08) 15%, 
    rgba(255, 255, 255, 0.03) 25%
  );
  background-size: 1000px 100%;
  animation: shimmer 20s infinite linear;
  will-change: background-position;
}

/* Gradient shift for background */
@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animate-gradient-shift {
  background-size: 200% 200%;
  animation: gradient-shift 10s ease infinite;
  will-change: background-position;
}

/* Sparkle noise pattern */
.bg-noise {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* Custom radial gradient for glowing effect */
.glow-radial {
  background: radial-gradient(circle at center, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
}

/* Content-visibility for off-screen elements */
.optimize-visibility {
  content-visibility: auto;
  contain-intrinsic-size: 0 500px; /* Estimate size to prevent layout shifts */
}

/* For devices with high refresh rates */
@media (prefers-reduced-motion: no-preference) and (min-width: 1024px) {
  .high-refresh-device {
    animation-timing-function: linear;
    backface-visibility: hidden;
    transform-style: preserve-3d;
    will-change: transform, opacity;
  }
}

/* Lazyload fade in */
.lazyload-fade {
  transition: opacity 0.3s ease-in;
}

/* Improve web font rendering */
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Layer optimizations - group modifications to avoid consecutive style recalculations */
.layer-transform {
  transform: translateZ(0);
  will-change: transform;
}

.layer-opacity {
  will-change: opacity;
}

/* Hardware acceleration helpers */
.hw-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000;
}

/* Responsive design performance optimizations */
@media (max-width: 768px) {
  .simplify-on-mobile {
    animation-duration: 0.3s !important;
    transition-duration: 0.3s !important;
    transform: none !important;
  }
}

/* Wave animations in AnimatedBackground.css */
.wave1 {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.3' d='M0,192L48,170.7C96,149,192,107,288,112C384,117,480,171,576,197.3C672,224,768,224,864,208C960,192,1056,160,1152,154.7C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
  background-size: 1440px 100px;
  z-index: 3;
}

.wave2 {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.2' d='M0,128L48,144C96,160,192,192,288,176C384,160,480,96,576,90.7C672,85,768,139,864,165.3C960,192,1056,192,1152,170.7C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
  background-size: 1440px 100px;
  z-index: 2;
}

.wave3 {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M0,64L48,64C96,64,192,64,288,80C384,96,480,128,576,149.3C672,171,768,181,864,186.7C960,192,1056,192,1152,170.7C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
  background-size: 1440px 100px;
  z-index: 1;
}

/* Text truncation for long content */
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Max width for text content to prevent overflow */
.max-w-content {
  max-width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Fix for words coming off their tiles */
.text-container {
  word-break: break-word;
  hyphens: auto;
}